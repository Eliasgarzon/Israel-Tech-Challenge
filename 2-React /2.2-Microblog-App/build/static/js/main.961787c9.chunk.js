(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{138:function(e,t,r){},144:function(e,t,r){},152:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(58),s=r.n(c),i=(r(138),r(211)),o=r(208),l=r(119),u=Object(l.a)({palette:{mode:"dark"}}),j=r(55),d=r(22),b=r(217),O=r(218),x=r(216),h=r(213),p=r(9),f=r(29),m=r(46),v=r(111),g=r(112),y=r(44),w=r(113),S=Object(v.a)({apiKey:"AIzaSyCVDeHyDPZexStP2s4orI-4VrKsCmP7vt8",authDomain:"chirper-33289.firebaseapp.com",projectId:"chirper-33289",storageBucket:"chirper-33289.appspot.com",messagingSenderId:"435210229256",appId:"1:435210229256:web:e70d8d376104c37843e3bd"}),I=Object(y.g)(),k=Object(w.a)(),E=Object(g.a)(S),C=r(2),R=Object(n.createContext)(),P=function(e,t){switch(t.type){case"SET_USER":return Object(f.a)(Object(f.a)({},e),{},{userName:t.payload});case"LOGIN":case"LOGOUT":return Object(f.a)(Object(f.a)({},e),{},{user:t.payload});case"AUTH_IS_READY":return Object(f.a)(Object(f.a)({},e),{},{user:t.payload,authIsReady:!0});default:return e}};function D(e){var t=e.children,r=Object(n.useReducer)(P,{userName:"this user",user:null,authIsReady:!1}),a=Object(p.a)(r,2),c=a[0],s=a[1];Object(n.useEffect)((function(){Object(m.c)(k,(function(e){s({type:"AUTH_IS_READY",payload:e})}))()}),[]);return Object(C.jsx)(R.Provider,{value:Object(f.a)(Object(f.a)({},c),{},{setUserName:function(e){s({type:"SET_USER",payload:e})},dispatch:s}),children:t})}function U(){var e=Object(n.useContext)(R);if(void 0===e)throw new Error("Please use the context inside a context provider");return e}var L=r(0),N=r.n(L),T=r(4),F=(r(144),r(201)),A=r(214);function M(){var e=Object(d.h)().searchInputInitial,t=Object(n.useState)("CHIRPS"),r=Object(p.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(e||""),o=Object(p.a)(s,2),l=o[0],u=o[1],j=Object(d.g)();return Object(C.jsxs)(i.a,{sx:{mx:"auto",display:"flex",alignItems:"center",gap:2},children:[Object(C.jsx)(F.a,{onChange:function(e){return u(e.target.value)},value:l,InputProps:{endAdornment:Object(C.jsx)(h.a,{disabled:!1,variant:"text",onClick:function(){if(l){var e="/".concat(a.toLowerCase(),"/").concat(l);j(e)}window.location.reload(!0)},children:"Search"})},children:" "}),Object(C.jsxs)(A.a,{disableElevation:!0,variant:"contained",children:[Object(C.jsx)(h.a,{variant:"CHIRPS"===a?"contained":"text",onClick:function(){return c("CHIRPS")},children:"Chirps"}),Object(C.jsx)(h.a,{variant:"USERS"===a?"contained":"text",onClick:function(){return c("USERS")},children:"Users"})]})]})}var H=r(215);function _(e){var t=e.user,r=e.sx,n=Object(d.g)(),a="/profile/".concat(t.uid);return Object(C.jsxs)(h.a,{size:"small",variant:"text",sx:Object(f.a)({display:"flex",gap:1,alignItems:"center",textTransform:"none"},r),onClick:function(){return n(a)},children:[Object(C.jsx)(H.a,{alt:t.displayName,src:t.photoURL,sx:{height:"25px",width:"25px"}}),Object(C.jsx)(x.a,{variant:"subtitle1",component:"span",noWrap:!0,children:t.displayName})]})}function G(){var e=U().user,t=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(null),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),u=Object(p.a)(l,2),j=u[0],d=u[1],b=U().dispatch,O=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),d(!0),e.prev=2,e.next=5,Object(m.e)(k);case 5:b({type:"LOGOUT",payload:null}),r||(d(!1),o(null)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r||(console.log(e.t0.message),o(e.t0.message),d(!1));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return a(!0)}}),[]),{logout:O,error:i,isPending:j}}(),r=t.logout;return Object(C.jsx)(b.a,{position:"sticky",children:Object(C.jsxs)(O.a,{children:[Object(C.jsx)(x.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"CHIRP"}),Object(C.jsx)(j.c,{to:"/",className:"navLink",children:Object(C.jsx)(x.a,{variant:"button",children:" Home "})}),Object(C.jsx)(j.c,{to:"/profile",className:"navLink",children:Object(C.jsx)(x.a,{variant:"button",children:" Profile "})}),Object(C.jsx)(M,{}),Object(C.jsx)(_,{user:e,sx:{marginLeft:"auto",p:0}}),Object(C.jsx)(h.a,{size:"small",onClick:r,variant:"outlined",sx:{mx:2},children:"Logout"})]})})}var z=r(205),W=r(27),q=r(220),B=r(5),Y={document:null,isPending:!1,error:null,success:null},K=function(e,t){switch(t.type){case"IS_PENDING":return{isPending:!0,document:null,success:!1,error:null};case"ADDED_DOCUMENT":case"GOT_DOCUMENT":case"UPDATED_DOCUMENT":return{isPending:!1,document:t.payload,success:!0,error:null};case"ERROR":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},V=function(e){var t=Object(n.useReducer)(K,Y),r=Object(p.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(!1),i=Object(p.a)(s,2),o=i[0],l=i[1],u="users"===e,j=Object(y.d)(I,e),d=function(e){o||c(e)},b=function(){var t=Object(T.a)(N.a.mark((function t(r){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c({type:"IS_PENDING"}),t.prev=1,u){t.next=8;break}return t.next=5,Object(y.a)(j,r);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,Object(y.h)(Object(y.e)(I,e,r.uid),r);case 10:t.t0=t.sent;case 11:n=t.t0,d({type:"ADDED_DOCUMENT",payload:n}),t.next=18;break;case 15:t.prev=15,t.t1=t.catch(1),d({type:"ERROR",payload:t.t1.message});case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),O=function(){var e=Object(T.a)(N.a.mark((function e(t){var r,n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(y.e)(I,"users",t),e.next=4,Object(y.f)(r);case 4:n=e.sent,a=n.data(),d({type:"GOT_DOCUMENT",payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({type:"ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var t=Object(T.a)(N.a.mark((function t(r,n,a){var c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c=Object(y.e)(I,e,r),"PUSH"!==a.type){t.next=5;break}return t.next=5,Object(y.i)(c,Object(B.a)({},n,Object(y.c)(a.payload)));case 5:if("FILTER"!==a.type){t.next=8;break}return t.next=8,Object(y.i)(c,Object(B.a)({},n,Object(y.b)(a.payload)));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),d({type:"ERROR",payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,r,n){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return l(!0)}}),[]),{addDocument:b,response:a,getDocument:O,updateDocumentArray:x}};function J(){var e=U().user,t=Object(n.useState)(""),r=Object(p.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(!1),i=Object(p.a)(s,2),o=i[0],l=i[1],u=V("tweets"),j=u.addDocument,d=u.response,b=function(){var t=Object(T.a)(N.a.mark((function t(r){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),n={uid:e.uid,createdBy:Object(W.e)(I,"users",e.uid),date:(new Date).toISOString(),content:a,likes:[]},j(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){d.success&&c("")}),[d.success]),Object(C.jsxs)("form",{onSubmit:b,children:[Object(C.jsx)(F.a,{className:"textField",error:o,helperText:o?"The chirp can't contain more than 140 chars.":"",required:!0,label:"Chirp chirp...",onChange:function(e){c(e.target.value),140===e.target.value.length?l(!0):l(!1)},multiline:!0,minRows:5,value:a,sx:{width:"50%",my:5},color:"primary",variant:"filled",InputProps:{endAdornment:Object(C.jsx)(h.a,{disabled:d.isPending,variant:"contained",type:"submit",sx:{mt:"auto"},children:"Chirp"})},inputProps:{maxLength:140}}),d.error&&Object(C.jsx)(z.a,{severity:"warning",sx:{width:"50%",mx:"auto"},children:"Tweet was not added to the server"}),d.isPending&&Object(C.jsx)(q.a,{sx:{width:"50%",mx:"auto",mb:5}})]})}var Z=r(224),Q=r(222),X=r(223),$=r(225),ee=r(226),te=r(203),re=r(209),ne=function(e,t){var r=Object(n.useState)(null),a=Object(p.a)(r,2),c=a[0],s=a[1],i=Object(n.useState)(null),o=Object(p.a)(i,2),l=o[0],u=o[1],j=Object(n.useState)(!1),d=Object(p.a)(j,2),b=d[0],O=d[1];return Object(n.useEffect)((function(){O(!0);var r=Object(W.e)(I,e,t),n=Object(W.i)(r,(function(e){s(e.data()),u(null),O(!1)}),(function(e){console.log(e),O("false"),u("could not fetch the document")}));return function(){return n()}}),[e,t]),{document:c,error:l,isPending:b}},ae=r(221),ce=r(202);function se(e){var t=e.userId,r=e.otherUserId,a=e.otherUserFollowers,c=Object(n.useState)(!1),s=Object(p.a)(c,2),i=s[0],o=s[1],l=V("users").updateDocumentArray;Object(n.useEffect)((function(){a.forEach((function(e){e.id===t?o(!0):o(!1)}))}),[a,t]);var u=function(){var e=Object(T.a)(N.a.mark((function e(n){var a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),a=Object(W.e)(I,"users",t),c=Object(W.e)(I,"users",r),i?i&&(l(t,"following",{type:"FILTER",payload:c}),l(r,"followers",{type:"FILTER",payload:a})):(l(t,"following",{type:"PUSH",payload:c}),l(r,"followers",{type:"PUSH",payload:a})),o((function(e){return!e}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(h.a,{variant:i?"contained":"outlined",onClick:u,children:i?"Unfollow":"Follow"})}var ie=Object(ce.a)((function(e){return{tweetHeader:{textDecoration:"none","&:hover":{backgroundColor:e.palette.grey[700],cursor:"pointer"}}}}));function oe(e){var t=e.user,r=e.loggedUserId,n=ie(),a=Object(d.g)(),c="/profile/".concat(t.uid);return Object(C.jsx)(ae.a,{onClick:function(){return a(c)},avatar:Object(C.jsx)(H.a,{alt:t.displayName,src:t.photoURL}),className:n.tweetHeader,title:t.displayName,sx:{borderBottom:1,borderColor:"secondary"},action:Object(C.jsx)(C.Fragment,{children:r!==t.uid&&Object(C.jsx)(se,{userId:r,otherUserId:t.uid,otherUserFollowers:t.followers})})})}function le(e){var t=e.otherUser,r=e.userId,n=ne("users",t.id),a=n.document,c=n.isPending,s=n.error;return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)(Q.a,{elevation:5,sx:{width:"50%",mx:"auto",bgcolor:"#343A40"},children:[a&&Object(C.jsx)(oe,{user:a,loggedUserId:r}),c&&Object(C.jsx)(X.a,{}),s&&Object(C.jsx)(z.a,{severity:"warning",children:"Cannot retrieve this users data"})]},t.id)})}var ue={height:"50%",backgroundColor:"#272727",top:"50%",left:"50%",transform:"translate(-50%, -50%)",overflow:"scroll",boxShadow:24};function je(e){var t=e.data,r=e.buttonText,a=e.errorMessage,c=e.userId,s=Object(n.useState)(!1),i=Object(p.a)(s,2),o=i[0],l=i[1];return Object(C.jsxs)("div",{children:[Object(C.jsx)(h.a,{onClick:function(){return l(!0)},children:r}),Object(C.jsx)(te.a,{open:o,onClose:function(){return l(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(C.jsxs)(re.a,{sx:ue,children:[t.map((function(e){return Object(C.jsx)(le,{otherUser:e,userId:c},e.id)})),!t[0]&&Object(C.jsx)(z.a,{severity:"warning",children:a})]})})]})}function de(e){var t=e.user,r=ne("users",t.id),n=r.document,a=r.isPending,c=r.error;return Object(C.jsxs)(C.Fragment,{children:[n&&Object(C.jsx)(H.a,{alt:n.displayName,src:n.photoURL}),a&&Object(C.jsx)(X.a,{}),c&&Object(C.jsx)(x.a,{variant:"button",children:" Pictures not found!"})]})}var be=r(219),Oe=r(117),xe=r.n(Oe);function he(e){var t=e.loggedUserId,r=e.tweet,a=Object(n.useState)(!1),c=Object(p.a)(a,2),s=c[0],i=c[1];Object(n.useEffect)((function(){r.likes.forEach((function(e){e.id===t&&i(!0)}))}),[r.likes,t]);var o=V("tweets").updateDocumentArray,l=function(){var e=Object(T.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(W.e)(I,"users",t),s?s&&o(r.id,"likes",{type:"FILTER",payload:n}):o(r.id,"likes",{type:"PUSH",payload:n}),i((function(e){return!e}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(be.a,{"aria-label":"add to favorites",onClick:l,children:[r.likes.length,Object(C.jsx)(xe.a,{color:s?"error":"default"})]})}function pe(e){var t=e.tweet,r=U().user,n=ne("users",t.uid),a=n.document,c=n.error,s=n.isPending,o=Object(C.jsxs)(Z.a,{max:4,children:[t.likes.slice(0,4).map((function(e){return Object(C.jsx)(de,{user:e},e.id)})),t.likes.slice(4).map((function(e){return Object(C.jsx)("div",{},e)}))]});return Object(C.jsx)(C.Fragment,{children:a&&Object(C.jsxs)(Q.a,{elevation:5,sx:{width:"50%",mx:"auto",bgcolor:"#343A40"},children:[Object(C.jsx)(oe,{user:a,loggedUserId:r.uid}),Object(C.jsxs)(i.a,{children:[Object(C.jsx)($.a,{children:Object(C.jsx)(x.a,{variant:"body1",color:"text.secondary",children:t.content})}),Object(C.jsxs)(ee.a,{disableSpacing:!0,children:[Object(C.jsx)(he,{loggedUserId:r.uid,tweet:t}),Object(C.jsx)(je,{data:t.likes,buttonText:o,errorMessage:"No Likes",userId:r.uid})]})]}),s&&Object(C.jsx)(X.a,{}),c&&Object(C.jsx)(z.a,{severity:"warning",children:"Could not retrieve chirp owner info information"})]})})}function fe(e){var t=e.data;return Object(C.jsx)(i.a,{sx:{display:"flex",flexDirection:"column",width:"100%",gap:"20px"},children:t&&t.map((function(e){return Object(C.jsx)(pe,{tweet:e},e.id)}))})}var me=r(23),ve=function(e,t,r){var a=Object(n.useState)(null),c=Object(p.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)(null),l=Object(p.a)(o,2),u=l[0],j=l[1],d=Object(n.useState)(!1),b=Object(p.a)(d,2),O=b[0],x=b[1],h=Object(n.useState)(10),m=Object(p.a)(h,2),v=m[0],g=m[1],y=Object(n.useState)(null),w=Object(p.a)(y,2),S=w[0],k=w[1];Object(n.useEffect)((function(){k(null),x(!0);var n=Object(W.d)(I,e);t&&(n=Object(W.k)(n,W.n.apply(void 0,Object(me.a)(t)))),r&&(n=Object(W.k)(n,W.j.apply(void 0,Object(me.a)(r)),Object(W.h)(v)));var a=Object(W.i)(n,(function(e){var t=[];if(e.docs.forEach((function(e){t.push(Object(f.a)(Object(f.a)({},e.data()),{},{id:e.id}))})),i(t),j(null),x(!1),e.size+10<v)return k("No more chirps"),void x(!1)}),(function(e){console.log(e),x("false"),j("could not fetch the data")}));return function(){return a()}}),[e,t,r,v]);return{documents:s,error:u,isPending:O,getMoreDocs:function(e){g(e?10:function(e){return e+10})},docLimit:v,docLimitError:S}},ge=r(210),ye=r(227);function we(e){var t,r=e.setTweetFilterCondition,a=e.getMoreDocs,c=U().user,s=ne("users",c.uid),i=s.document,o=s.isPending,l=s.error,u=Object(n.useState)("ALL"),j=Object(p.a)(u,2),d=j[0],b=j[1];i&&(t={ALL:null,MY_CHIRPS:["uid","==",c.uid],MY_LIKED_CHIRPS:["likes","array-contains",Object(W.e)(I,"users",c.uid)],FOLLOWING:["createdBy","in",i.following]});return Object(C.jsxs)(C.Fragment,{children:[i&&Object(C.jsxs)(ge.a,{value:d,exclusive:!0,onChange:function(e){e.target.value!==d&&(a("reset"),r(t[e.target.value]),b(e.target.value))},sx:{mb:5},children:[Object(C.jsx)(ye.a,{value:"ALL",children:"All Chirps"}),Object(C.jsx)(ye.a,{value:"MY_CHIRPS",children:"My Chirps"}),Object(C.jsx)(ye.a,{value:"MY_LIKED_CHIRPS",children:"Liked Chirps"}),Object(C.jsx)(ye.a,{value:"FOLLOWING",disabled:!i.following[0],children:"Following"})]}),o&&Object(C.jsx)(q.a,{color:"warning",sx:{width:"50%",mx:"auto",my:1}}),l&&Object(C.jsx)(z.a,{sx:{width:"50%",mx:"auto"},severity:"error",children:l})]})}function Se(){var e=Object(n.useState)(null),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(["date","desc"]),s=Object(p.a)(c,1)[0],o=ve("tweets",r,s),l=o.documents,u=o.error,j=o.getMoreDocs,d=o.docLimitError;return Object(C.jsxs)(i.a,{sx:{overflow:"scroll",height:"100vh"},onScroll:function(e){e.target.scrollHeight-e.target.scrollTop!==e.target.clientHeight||d||j(null)},children:[Object(C.jsx)(J,{}),Object(C.jsx)(we,{setTweetFilterCondition:a,getMoreDocs:j}),l&&Object(C.jsx)(fe,{data:l}),d&&Object(C.jsx)(h.a,{variant:"text",children:d}),u&&Object(C.jsx)(z.a,{sx:{width:"50%",mx:"auto"},severity:"error",children:u})]})}function Ie(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),s=Object(p.a)(c,2),i=s[0],o=s[1],l=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(null),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),u=Object(p.a)(l,2),j=u[0],d=u[1],b=U().dispatch,O=function(){var e=Object(T.a)(N.a.mark((function e(t,n){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),d(!0),e.prev=2,e.next=5,Object(m.d)(k,t,n);case 5:a=e.sent,b({type:"LOGIN",payload:a.user}),r||(d(!1),o(null)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r||(console.log(e.t0.message),o(e.t0.message),d(!1));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return a(!0)}}),[]),{login:O,error:i,isPending:j}}(),u=l.login,d=l.isPending,b=l.error;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{style:{color:"white"},children:"Welcome back, "}),Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(r,i)},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(C.jsx)(F.a,{variant:"filled",required:!0,label:"Email",onChange:function(e){a(e.target.value)},value:r,sx:{width:"50%",my:5}}),Object(C.jsx)(F.a,{variant:"filled",required:!0,type:"password",label:"Password",onChange:function(e){o(e.target.value)},value:i,sx:{width:"50%",my:5}}),Object(C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(h.a,{type:"submit",variant:"contained",children:"Log in"}),d&&Object(C.jsx)(X.a,{sx:{mx:2}})]}),b&&Object(C.jsx)(z.a,{sx:{my:5},severity:"error",children:b}),Object(C.jsx)(j.b,{to:"/signup",className:"navLink",style:{padding:0},children:Object(C.jsx)(h.a,{size:"small",variant:"text",children:"Not a user? Sign Up"})})]})]})}function ke(e){var t=e.id,r=U().user,n=ne("users",t),a=n.document,c=n.isPending,s=n.error;return Object(C.jsxs)(C.Fragment,{children:[a&&Object(C.jsxs)(i.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",my:5},children:[Object(C.jsx)(H.a,{alt:a.displayName,src:a.photoURL,sx:{my:5}}),Object(C.jsxs)(i.a,{sx:{display:"flex",gap:5},children:[Object(C.jsx)(je,{userId:r.uid,data:a.followers,buttonText:a.followers.length+" Followers",errorMessage:a.displayName+" has no followers, show him some love"}),Object(C.jsx)(je,{userId:r.uid,data:a.following,buttonText:a.following.length+" Following",errorMessage:a.displayName+" is not following anyone"})]}),Object(C.jsx)(F.a,{disabled:!0,variant:"filled",value:a.displayName,sx:{width:"50%",my:5}}),Object(C.jsx)(se,{userId:r.uid,otherUserId:a.uid,otherUserFollowers:a.followers})]}),c&&Object(C.jsx)(q.a,{color:"warning",sx:{width:"50%",mx:"auto",my:1}}),s&&Object(C.jsx)(z.a,{sx:{width:"50%",mx:"auto"},severity:"error",children:s})]})}var Ee=r(53),Ce=r(228),Re=r(207),Pe=r(120),De={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},Ue={borderColor:"#2196f3"},Le={borderColor:"#00e676"},Ne={borderColor:"#ff1744"},Te={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16,justifyContent:"center"},Fe={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:100,height:100,padding:4,boxSizing:"border-box"},Ae={display:"flex",minWidth:0,overflow:"hidden"},Me={display:"block",width:"auto",height:"100%"};function He(e){var t=e.user,r=e.setThumbnail,a=e.setThumbnailError,c=e.thumbnailError,s=e.showPreview,o=(e.thumbnail,Object(n.useState)([])),l=Object(p.a)(o,2),u=l[0],j=l[1],d=Object(Pe.a)({validator:function(e){a(null),"image"===e.type.split("/")[0]?e.size>1e6&&a("File must be less than 1mb"):a("File must be an image")},accept:"image/*",maxSize:1e6,onDrop:function(e){j(e.map((function(e){return Object.assign(e,{photoURL:URL.createObjectURL(e)})}))),r(e[0])}}),b=d.getRootProps,O=d.getInputProps,x=d.isDragActive,h=d.isDragAccept,m=d.isDragReject,v=u.map((function(e){return Object(C.jsx)("div",{style:Fe,children:Object(C.jsx)("div",{style:Ae,children:Object(C.jsx)("img",{src:e.photoURL,style:Me,alt:e.name})})},e.name)}));Object(n.useEffect)((function(){return function(){u.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[u]);var g=Object(n.useMemo)((function(){return Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)({},De),x?Ue:{}),h?Le:{}),m?Ne:{})}),[x,m,h]);return Object(C.jsxs)(C.Fragment,{children:[!s&&Object(C.jsx)(H.a,{alt:t.displayName,src:t.photoURL,sx:{my:5}}),s&&Object(C.jsxs)(i.a,{sx:{mt:1},children:[Object(C.jsxs)("div",Object(f.a)(Object(f.a)({},b({style:g})),{},{children:[Object(C.jsx)("input",Object(f.a)({},O())),Object(C.jsx)("p",{children:"Please Upload a profile picture. Click here or drag and drop."})]})),Object(C.jsx)("div",{style:Te,children:v}),c&&Object(C.jsx)(z.a,{severity:"error",children:c})]})]})}function _e(){var e=U().user,t=ne("users",e.uid).document,r=Object(n.useState)(!1),a=Object(p.a)(r,2),c=a[0],s=a[1],o=Object(n.useState)(e.displayName),l=Object(p.a)(o,2),u=l[0],j=l[1],d=Object(n.useState)(!1),b=Object(p.a)(d,2),O=b[0],x=b[1],f=Object(n.useState)(null),v=Object(p.a)(f,2),g=v[0],y=v[1],w=Object(n.useState)(null),S=Object(p.a)(w,2),k=S[0],R=S[1],P=Object(n.useState)(null),D=Object(p.a)(P,2),L=D[0],M=D[1],H=function(){var t=Object(T.a)(N.a.mark((function t(r){var n,a,c,s;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),y(null),x(!0),n=Object(W.e)(I,"users",e.uid),t.prev=4,!k){t.next=13;break}return a="thumbnails/".concat(e.uid,"/").concat(k.name),c=Object(Ee.c)(E,a),t.next=10,Object(Ee.d)(c,k);case 10:return t.next=12,Object(Ee.a)(c);case 12:s=t.sent;case 13:return t.next=15,Object(m.f)(e,{displayName:u,photoURL:s||e.photoURL});case 15:return t.next=17,Object(W.m)(n,{displayName:u,photoURL:s||e.photoURL});case 17:x(!1),window.location.reload(),t.next=26;break;case 21:t.prev=21,t.t0=t.catch(4),console.log(t.t0),x(!1),y("Could not update profile. Please try again.");case 26:case"end":return t.stop()}}),t,null,[[4,21]])})));return function(e){return t.apply(this,arguments)}}(),_=u!==e.displayName||k;return Object(C.jsxs)("form",{onSubmit:H,style:{display:"flex",flexDirection:"column",alignItems:"center",my:5},children:[Object(C.jsx)(Ce.a,{sx:{display:"block",mt:5,color:"white"},control:Object(C.jsx)(Re.a,{checked:c,onChange:function(){c&&_?alert("Please save your changes"):(s(!c),M(null))},name:"edit",color:"primary"}),label:"Edit"}),Object(C.jsx)(He,{user:e,showPreview:c,thumbnail:k,setThumbnail:R,thumbnailError:L,setThumbnailError:M}),t&&Object(C.jsxs)(i.a,{sx:{display:"flex",gap:5},children:[Object(C.jsx)(je,{userId:e.uid,data:t.followers,buttonText:t.followers.length+" Followers",errorMessage:"No followers...get chirping and win some followers!"}),Object(C.jsx)(je,{userId:e.uid,data:t.following,buttonText:t.following.length+" Following",errorMessage:"Not Following anyone... come on be social!"})]}),Object(C.jsx)(F.a,{disabled:!c,variant:"filled",required:!0,label:"Display Name",sx:{width:"50%",my:5},onChange:function(e){return j(e.target.value.replace(/\s+/g,""))},onKeyDown:function(e){" "===e.key&&y("Display name cannot contain spaces!")," "!==e.key&&y(null)},value:u}),c&&Object(C.jsxs)(A.a,{children:[Object(C.jsx)(h.a,{disabled:O||!_,variant:"contained",type:"submit",children:"SAVE"}),Object(C.jsx)(h.a,{disabled:O||!_,variant:"outlined",onClick:function(){j(e.displayName),R(null),M(null)},children:"RESET"}),O&&Object(C.jsx)(X.a,{})]}),g&&Object(C.jsx)(z.a,{sx:{my:5},severity:"error",children:g})]})}function Ge(){var e=U().user,t=Object(d.h)().id;return Object(C.jsxs)(C.Fragment,{children:[(!t||t===e.uid)&&Object(C.jsx)(_e,{}),t&&t!==e.uid&&Object(C.jsx)(ke,{id:t})]})}function ze(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(""),u=Object(p.a)(l,2),d=u[0],b=u[1],O=Object(n.useState)(null),x=Object(p.a)(O,2),f=x[0],v=x[1],g=Object(n.useState)(null),y=Object(p.a)(g,2),w=y[0],S=y[1],I=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(null),s=Object(p.a)(c,2),i=s[0],o=s[1],l=Object(n.useState)(!1),u=Object(p.a)(l,2),j=u[0],d=u[1],b=U().dispatch,O=V("users").addDocument,x=function(){var e=Object(T.a)(N.a.mark((function e(t,n,a,c){var s,i,l,u;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(null),d(!0),e.prev=2,c){e.next=5;break}throw new Error("Please upload an image");case 5:return e.next=7,Object(m.a)(k,t,n);case 7:if(s=e.sent){e.next=10;break}throw new Error("Could not complete signup");case 10:return i="thumbnails/".concat(s.user.uid,"/").concat(c.name),l=Object(Ee.c)(E,i),e.next=14,Object(Ee.d)(l,c);case 14:return e.next=16,Object(Ee.a)(l);case 16:return u=e.sent,e.next=19,Object(m.f)(s.user,{displayName:a,photoURL:u});case 19:b({type:"LOGIN",payload:s.user}),O({uid:s.user.uid,displayName:s.user.displayName,email:s.user.email,photoURL:s.user.photoURL,following:[],followers:[]}),r||(d(!1),o(null)),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(2),console.log(e.t0.message),r||(d(!1),o(e.t0.message));case 28:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(t,r,n,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return a(!0)}}),[]),{error:i,isPending:j,signup:x}}(),R=I.error,P=I.isPending,D=I.signup;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{style:{color:"white"},children:"Sign up"}),Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault(),D(r,i,d,f)},style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(C.jsx)(F.a,{variant:"filled",required:!0,label:"Email",onChange:function(e){a(e.target.value)},value:r,sx:{width:"50%",my:5}}),Object(C.jsx)(F.a,{variant:"filled",required:!0,type:"password",label:"Password",onChange:function(e){o(e.target.value)},value:i,sx:{width:"50%",my:5}}),Object(C.jsx)(F.a,{variant:"filled",required:!0,label:"Display Name",onChange:function(e){b(e.target.value.replace(/\s+/g,""))},value:d,sx:{width:"50%",my:5},error:d.length>=15}),Object(C.jsx)(He,{user:null,showPreview:!0,thumbnail:f,setThumbnail:v,thumbnailError:w,setThumbnailError:S}),Object(C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(C.jsx)(h.a,{type:"submit",variant:"contained",children:"Sign up"}),P&&Object(C.jsx)(X.a,{sx:{mx:2}})]}),R&&Object(C.jsx)(z.a,{sx:{my:5},severity:"error",children:R}),Object(C.jsx)(j.b,{to:"/login",className:"navLink",style:{padding:0},children:Object(C.jsx)(h.a,{size:"small",variant:"text",children:"Already a user? Log in"})})]})]})}function We(e){var t=e.searchInput,r=Object(n.useState)(["content","==",t]),a=Object(p.a)(r,1)[0],c=Object(n.useState)(["date","desc"]),s=Object(p.a)(c,1)[0],o=ve("tweets",a,s),l=o.documents,u=o.error,j=o.isPending;return Object(C.jsxs)(i.a,{sx:{overflow:"scroll",height:"100vh",mt:5},children:[l&&Object(C.jsx)(fe,{data:l}),Object(C.jsx)(h.a,{variant:"text",children:"Search results will only show 10"}),j&&Object(C.jsx)(q.a,{color:"warning",sx:{width:"50%",mx:"auto",my:1}}),u&&Object(C.jsx)(z.a,{sx:{width:"50%",mx:"auto"},severity:"error",children:u})]})}function qe(e){var t=e.searchInput,r=U().user,a=Object(n.useState)(["displayName","==",t]),c=Object(p.a)(a,1)[0],s=ve("users",c,null),o=s.documents,l=s.error,u=s.isPending;return Object(C.jsxs)(i.a,{sx:{overflow:"scroll",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",mt:5},children:[o&&o.map((function(e){return Object(C.jsx)(le,{otherUser:e,userId:r.uid},e.id)})),Object(C.jsx)(h.a,{variant:"text",children:"Search results will only show 10"}),u&&Object(C.jsx)(q.a,{color:"warning",sx:{width:"50%",mx:"auto",my:1}}),l&&Object(C.jsx)(z.a,{sx:{width:"50%",mx:"auto"},severity:"error",children:l})]})}function Be(){var e=Object(d.h)(),t=e.searchFilter,r=e.searchInput;return Object(C.jsxs)(C.Fragment,{children:["chirps"===t&&Object(C.jsx)(We,{searchInput:r}),"users"===t&&Object(C.jsx)(qe,{searchInput:r})]})}var Ye=function(){var e=U(),t=e.user,r=e.authIsReady;return Object(C.jsx)(o.a,{theme:u,children:Object(C.jsx)(i.a,{sx:{textAlign:"center"},children:r&&Object(C.jsxs)(j.a,{children:[t&&Object(C.jsx)(G,{}),Object(C.jsxs)(d.d,{children:[Object(C.jsx)(d.b,{path:"/",element:t&&Object(C.jsx)(Se,{})||Object(C.jsx)(d.a,{to:"/login"})}),Object(C.jsx)(d.b,{exact:!0,path:"/profile",element:t&&Object(C.jsx)(Ge,{})||Object(C.jsx)(d.a,{to:"/login"})}),Object(C.jsx)(d.b,{path:"/signup",element:!t&&Object(C.jsx)(ze,{})||Object(C.jsx)(d.a,{to:"/"})}),Object(C.jsx)(d.b,{path:"/login",element:!t&&Object(C.jsx)(Ie,{})||Object(C.jsx)(d.a,{to:"/"})}),Object(C.jsx)(d.b,{path:"/profile/:id",element:t&&Object(C.jsx)(Ge,{})||Object(C.jsx)(d.a,{to:"/"})}),Object(C.jsx)(d.b,{path:"/:searchFilter/:searchInput",element:t&&Object(C.jsx)(Be,{})||Object(C.jsx)(d.a,{to:"/"})}),Object(C.jsx)(d.b,{path:"*",exact:!0})]})]})})})};s.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(D,{children:Object(C.jsx)(Ye,{})})}),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.961787c9.chunk.js.map